{"version":3,"file":"index.js","sources":["../src/compatMap.js","../src/fileReadAsString.js","../src/fileWriteFromString.js","../src/compileFileStructure.js","../src/corePlugin.js","../src/moduleCompatMap.js","../src/objectHelper.js","../src/versionCompare.js","../src/pluginMapToPluginsForPlatform.js"],"sourcesContent":["const pluginJSON = require(\"@babel/preset-env/data/plugins.json\")\n\nexport const compatMap = pluginJSON\n","import fs from \"fs\"\n\nexport const fileReadAsString = (location) =>\n  new Promise((resolve, reject) => {\n    fs.readFile(location, (error, buffer) => {\n      if (error) {\n        reject(error)\n      } else {\n        resolve(buffer.toString())\n      }\n    })\n  })\n","import fs from \"fs\"\n\nconst sequence = require(\"promise-sequential\") // rollup fails if using import here\n\nconst getFileLStat = (path) => {\n  return new Promise((resolve, reject) => {\n    fs.lstat(path, (error, lstat) => {\n      if (error) {\n        reject({ status: 500, reason: error.code })\n      } else {\n        resolve(lstat)\n      }\n    })\n  })\n}\n\nconst createFolder = ({ location }) => {\n  return new Promise((resolve, reject) => {\n    fs.mkdir(location, (error) => {\n      if (error) {\n        // au cas ou deux script essayent de crÃ©e un dossier peu importe qui y arrive c'est ok\n        if (error.code === \"EEXIST\") {\n          getFileLStat(location).then((stat) => {\n            if (stat.isDirectory()) {\n              resolve()\n            } else {\n              reject({ status: 500, reason: \"expect a directory\" })\n            }\n          })\n        } else {\n          reject({ status: 500, reason: error.code })\n        }\n      } else {\n        resolve()\n      }\n    })\n  })\n}\n\nconst normalizeSeparation = (filename) => filename.replace(/\\\\/g, \"/\")\n\nconst createFolderUntil = ({ location }) => {\n  let path = normalizeSeparation(location)\n  // remove first / in case path starts with / (linux)\n  // because it would create a \"\" entry in folders array below\n  // tryig to create a folder at \"\"\n  const pathStartsWithSlash = path[0] === \"/\"\n  if (pathStartsWithSlash) {\n    path = path.slice(1)\n  }\n  const folders = path.split(\"/\")\n\n  folders.pop()\n\n  return sequence(\n    folders.map((_, index) => {\n      return () => {\n        const folderLocation = folders.slice(0, index + 1).join(\"/\")\n        return createFolder({\n          location: `${pathStartsWithSlash ? \"/\" : \"\"}${folderLocation}`,\n        })\n      }\n    }),\n  )\n}\n\nexport const fileWriteFromString = (location, content) => {\n  return createFolderUntil({ location }).then(() => {\n    return new Promise((resolve, reject) => {\n      fs.writeFile(location, content, (error) => {\n        if (error) {\n          reject(error)\n        } else {\n          resolve()\n        }\n      })\n    })\n  })\n}\n","import path from \"path\"\nimport { readProjectMetaMap, forEachRessourceMatching } from \"@dmail/project-structure\"\nimport { fileReadAsString } from \"./fileReadAsString.js\"\nimport { fileWriteFromString } from \"./fileWriteFromString.js\"\n\nconst { transformAsync } = require(\"@babel/core\") // rollup fails if using import here\n\nexport const compileFileStructure = ({\n  root,\n  config = \"structure.config.js\",\n  predicate = ({ compile }) => compile,\n  into = \"dist\",\n  plugins,\n}) => {\n  const transpile = ({ code, filename, sourceFileName }) => {\n    return transformAsync(code, {\n      plugins,\n      filename,\n      sourceMaps: true,\n      sourceFileName,\n    })\n  }\n\n  const compileAndWrite = ({ absoluteName, relativeName }) => {\n    return fileReadAsString(absoluteName).then((source) => {\n      const buildRelativeName = `${into}/${relativeName}`\n      const buildLocation = `${root}/${buildRelativeName}`\n      const sourceMapName = `${path.basename(relativeName)}.map`\n      const sourceMapLocationForSource = `${sourceMapName}`\n      const sourceMapLocation = `${root}/${into}/${relativeName}.map`\n      const sourceNameForSourceMap = path.relative(path.dirname(sourceMapLocation), absoluteName)\n\n      return transpile({\n        code: source,\n        filename: absoluteName,\n        sourceFileName: sourceNameForSourceMap,\n      })\n        .then(({ code, map }) => {\n          if (map) {\n            code = `${code}\n//# sourceMappingURL=${sourceMapLocationForSource}`\n            return Promise.all([\n              fileWriteFromString(buildLocation, code),\n              fileWriteFromString(sourceMapLocation, JSON.stringify(map, null, \"  \")),\n            ])\n          }\n\n          return fileWriteFromString(buildLocation, code)\n        })\n        .then(() => {\n          console.log(`${relativeName} -> ${buildRelativeName} `)\n        })\n    })\n  }\n\n  return readProjectMetaMap({ root, config }).then((metaMap) => {\n    return forEachRessourceMatching(root, metaMap, predicate, compileAndWrite)\n  })\n}\n","import availablePlugins from \"@babel/preset-env/lib/available-plugins.js\"\n\nexport const isPluginNameCore = (pluginName) => pluginName in availablePlugins\n\nexport const pluginNameToPlugin = (pluginName) => {\n  if (isPluginNameCore(pluginName) === false) {\n    throw new Error(`unknown plugin ${pluginName}`)\n  }\n  return availablePlugins[pluginName]\n}\n\nexport const pluginOptionMapToPluginMap = (pluginOptionsMap = {}) => {\n  const pluginMap = {}\n\n  Object.keys(pluginOptionsMap).forEach((pluginName) => {\n    pluginMap[pluginName] = [pluginNameToPlugin(pluginName), pluginOptionsMap[pluginName]]\n  })\n\n  return pluginMap\n}\n","const moduleCompatMap = require(\"@babel/preset-env/data/built-in-modules.json\")\n\nexport { moduleCompatMap }\n","export const objectValues = (object) => {\n  return Object.keys(object).map((key) => object[key])\n}\n\nexport const objectFilter = (object, callback) => {\n  const filtered = {}\n\n  Object.keys(object).forEach((key) => {\n    const value = object[key]\n    if (callback(key, value, object)) {\n      filtered[key] = value\n    }\n  })\n\n  return filtered\n}\n","const semver = (version) => {\n  if (typeof version === \"number\") {\n    return {\n      major: version,\n      minor: 0,\n      patch: 0,\n    }\n  }\n  if (typeof version === \"string\") {\n    if (version.indexOf(\".\") > -1) {\n      const parts = version.split(\".\")\n      return {\n        major: Number(parts[0]),\n        minor: parts[1] ? Number(parts[1]) : 0,\n        patch: parts[2] ? Number(parts[2]) : 0,\n      }\n    }\n    if (isNaN(version)) {\n      return {\n        major: 0,\n        minor: 0,\n        patch: 0,\n      }\n    }\n    return {\n      major: Number(version),\n      minor: 0,\n      patch: 0,\n    }\n  }\n  throw new TypeError(`version must be a number or a string, got: ${typeof version}`)\n}\n\nexport const versionCompare = (versionA, versionB) => {\n  const semanticVersionA = semver(versionA)\n  const semanticVersionB = semver(versionB)\n\n  const majorDiff = semanticVersionA.major - semanticVersionB.major\n  if (majorDiff > 0) {\n    return majorDiff\n  }\n  if (majorDiff < 0) {\n    return majorDiff\n  }\n\n  const minorDiff = semanticVersionA.minor - semanticVersionB.minor\n  if (minorDiff > 0) {\n    return minorDiff\n  }\n  if (minorDiff < 0) {\n    return minorDiff\n  }\n\n  const patchDiff = semanticVersionA.patch - semanticVersionB.patch\n  if (patchDiff > 0) {\n    return patchDiff\n  }\n  if (patchDiff < 0) {\n    return patchDiff\n  }\n\n  return 0\n}\n\nexport const versionEqual = (versionA, versionB) => {\n  return String(versionA) === String(versionB)\n}\n\nexport const versionIsAbove = (versionSupposedAbove, versionSupposedBelow) => {\n  return versionCompare(versionSupposedAbove, versionSupposedBelow) > 0\n}\n\nexport const versionIsBelow = (versionSupposedBelow, versionSupposedAbove) => {\n  return versionCompare(versionSupposedBelow, versionSupposedAbove) < 0\n}\n\nexport const versionIsBelowOrEqual = (versionSupposedBelow, versionSupposedAbove) => {\n  return (\n    versionEqual(versionSupposedBelow, versionSupposedAbove) ||\n    versionIsBelow(versionSupposedBelow, versionSupposedAbove)\n  )\n}\n\nexport const versionHighest = (versionA, versionB) => {\n  return versionIsAbove(versionA, versionB) ? versionA : versionB\n}\n\nexport const versionLowest = (versionA, versionB) => {\n  return versionIsBelow(versionA, versionB) ? versionA : versionB\n}\n","import { compatMap as defaultCompatMap } from \"./compatMap.js\"\nimport { objectFilter, objectValues } from \"./objectHelper.js\"\nimport { versionIsBelow } from \"./versionCompare.js\"\n\nconst pluginCompatMapToPlatformVersion = (pluginCompatMap, platformName) => {\n  return platformName in pluginCompatMap ? pluginCompatMap[platformName] : \"Infinity\"\n}\n\nconst isPlatformCompatible = (pluginCompatMap, platformName, platformVersion) => {\n  const compatibleVersion = pluginCompatMapToPlatformVersion(pluginCompatMap, platformName)\n  return versionIsBelow(platformVersion, compatibleVersion)\n}\n\nconst pluginMapForPlatform = (pluginMap, platformName, platformVersion, compatMap) => {\n  return objectFilter(pluginMap, (pluginName) => {\n    return isPlatformCompatible(\n      pluginName in compatMap ? compatMap[pluginName] : {},\n      platformName,\n      platformVersion,\n    )\n  })\n}\n\nexport const pluginMapToPluginsForPlatform = (\n  pluginMap,\n  platformName,\n  platformVersion,\n  compatMap = defaultCompatMap,\n) => {\n  const platformPluginMap = pluginMapForPlatform(\n    pluginMap,\n    platformName,\n    platformVersion,\n    compatMap,\n  )\n  const plugins = objectValues(platformPluginMap)\n  return plugins\n}\n"],"names":["pluginJSON","require","compatMap","fileReadAsString","location","Promise","resolve","reject","fs","readFile","error","buffer","toString","sequence","getFileLStat","path","lstat","status","reason","code","createFolder","mkdir","then","stat","isDirectory","normalizeSeparation","filename","replace","createFolderUntil","pathStartsWithSlash","slice","folders","split","pop","map","_","index","folderLocation","join","fileWriteFromString","content","writeFile","transformAsync","compileFileStructure","root","config","predicate","compile","into","plugins","transpile","sourceFileName","sourceMaps","compileAndWrite","absoluteName","relativeName","source","buildRelativeName","buildLocation","sourceMapName","basename","sourceMapLocationForSource","sourceMapLocation","sourceNameForSourceMap","relative","dirname","all","JSON","stringify","console","log","readProjectMetaMap","metaMap","forEachRessourceMatching","isPluginNameCore","pluginName","availablePlugins","pluginNameToPlugin","Error","pluginOptionMapToPluginMap","pluginOptionsMap","pluginMap","Object","keys","forEach","moduleCompatMap","objectValues","object","key","objectFilter","callback","filtered","value","semver","version","major","minor","patch","indexOf","parts","Number","isNaN","TypeError","versionCompare","versionA","versionB","semanticVersionA","semanticVersionB","majorDiff","minorDiff","patchDiff","versionEqual","String","versionIsAbove","versionSupposedAbove","versionSupposedBelow","versionIsBelow","versionIsBelowOrEqual","versionHighest","versionLowest","pluginCompatMapToPlatformVersion","pluginCompatMap","platformName","isPlatformCompatible","platformVersion","compatibleVersion","pluginMapForPlatform","pluginMapToPluginsForPlatform","defaultCompatMap","platformPluginMap"],"mappings":"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"}